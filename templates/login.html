<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <div class="form-container">
    <h2 id="title">Login</h2>

    <!-- Language Dropdown -->
    <label for="language">üåê <span id="lang-label">Select Language</span>:</label>
    <select id="language" onchange="switchLanguage()">
      <option value="en">English</option>
      <option value="hi">Hindi</option>
      <option value="ta">Tamil</option>
    </select>

    <form method="POST">
      <label id="label-email" for="email_or_phone">Email or Phone:</label>
      <input type="text" name="email_or_phone" id="email_or_phone">
      <button type="button" onclick="startDictation('email_or_phone')">üé§</button>

      <label id="label-password">Password:</label>
      <input type="password" name="password" id="password">
      <button type="button" onclick="startDictation('password')">üé§</button>

      <button type="submit" id="submit-btn">Login</button>
    </form>

    <p><span id="new-user">New user?</span> <a href="/register" id="register-link">Register here</a></p>
  </div>

  <script>
    // Translation dictionary
    const translations = {
      en: {
        title: "Login",
        langLabel: "Select Language",
        email: "Email or Phone:",
        password: "Password:",
        submit: "Login",
        newUser: "New user?",
        registerLink: "Register here"
      },
      hi: {
        title: "‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç",
        langLabel: "‡§≠‡§æ‡§∑‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç",
        email: "‡§à‡§Æ‡•á‡§≤ ‡§Ø‡§æ ‡§´‡§º‡•ã‡§®:",
        password: "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°:",
        submit: "‡§≤‡•â‡§ó‡§ø‡§®",
        newUser: "‡§®‡§Ø‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ?",
        registerLink: "‡§Ø‡§π‡§æ‡§Ç ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§ï‡§∞‡•á‡§Ç"
      },
      ta: {
        title: "‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà",
        langLabel: "‡ÆÆ‡Øä‡Æ¥‡Æø‡ÆØ‡Øà‡Æ§‡Øç ‡Æ§‡Øá‡Æ∞‡Øç‡Æ®‡Øç‡Æ§‡ØÜ‡Æü‡ØÅ‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
        email: "‡ÆÆ‡Æø‡Æ©‡Øç‡Æ©‡Æû‡Øç‡Æö‡Æ≤‡Øç ‡ÆÖ‡Æ≤‡Øç‡Æ≤‡Æ§‡ØÅ ‡Æï‡Øà‡Æ™‡Øá‡Æö‡Æø:",
        password: "‡Æï‡Æü‡Æµ‡ØÅ‡Æö‡Øç‡Æö‡Øä‡Æ≤‡Øç:",
        submit: "‡Æâ‡Æ≥‡Øç‡Æ®‡ØÅ‡Æ¥‡Øà",
        newUser: "‡Æ™‡ØÅ‡Æ§‡Æø‡ÆØ ‡Æ™‡ÆØ‡Æ©‡Æ∞‡Øç?",
        registerLink: "‡Æá‡Æô‡Øç‡Æï‡Øá ‡Æ™‡Æ§‡Æø‡Æµ‡ØÅ ‡Æö‡ØÜ‡ÆØ‡Øç‡ÆØ‡Æµ‡ØÅ‡ÆÆ‡Øç"
      }
    };

    function switchLanguage() {
      const lang = document.getElementById('language').value;
      localStorage.setItem("preferredLang", lang); // Remember language

      document.getElementById("title").innerText = translations[lang].title;
      document.getElementById("lang-label").innerText = translations[lang].langLabel;
      document.getElementById("label-email").innerText = translations[lang].email;
      document.getElementById("label-password").innerText = translations[lang].password;
      document.getElementById("submit-btn").innerText = translations[lang].submit;
      document.getElementById("new-user").innerText = translations[lang].newUser;
      document.getElementById("register-link").innerText = translations[lang].registerLink;
    }

    // Auto-set preferred language on load
    window.onload = () => {
      const lang = localStorage.getItem("preferredLang") || "en";
      document.getElementById("language").value = lang;
      switchLanguage();
    };

    function startDictation(fieldId) {
      const recognition = new webkitSpeechRecognition();
      const langMap = { en: "en-IN", hi: "hi-IN", ta: "ta-IN" };
      const selectedLang = document.getElementById("language").value;
      recognition.lang = langMap[selectedLang] || "en-IN";

      recognition.onresult = function(event) {
        document.getElementById(fieldId).value = event.results[0][0].transcript;
      };

      recognition.onerror = function(event) {
        alert("Speech recognition error: " + event.error);
      };

      recognition.start();
    }
  </script>
</body>
</html>
